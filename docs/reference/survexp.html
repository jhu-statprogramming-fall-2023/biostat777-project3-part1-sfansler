<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Returns either the expected survival of a cohort of subjects, or the 
individual expected survival for each subject."><title>Compute Expected Survival — survexp • survival</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Compute Expected Survival — survexp"><meta property="og:description" content="Returns either the expected survival of a cohort of subjects, or the 
individual expected survival for each subject."><meta property="og:image" content="/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">survival</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">3.5-6</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/example-analysis.html">Example Analysis</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/therneau/survival/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Compute Expected Survival</h1>
      
      <div class="d-none name"><code>survexp.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Returns either the expected survival of a cohort of subjects, or the 
individual expected survival for each subject.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">survexp</span><span class="op">(</span><span class="va">formula</span>, <span class="va">data</span>, <span class="va">weights</span>, <span class="va">subset</span>, <span class="va">na.action</span>, <span class="va">rmap</span>, <span class="va">times</span>,</span>
<span>        method<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ederer"</span>, <span class="st">"hakulinen"</span>, <span class="st">"conditional"</span>, <span class="st">"individual.h"</span>,</span>
<span>                 <span class="st">"individual.s"</span><span class="op">)</span>,</span>
<span>        cohort<span class="op">=</span><span class="cn">TRUE</span>, conditional<span class="op">=</span><span class="cn">FALSE</span>,</span>
<span>        ratetable<span class="op">=</span><span class="fu">survival</span><span class="fu">::</span><span class="va"><a href="survexp.us.html">survexp.us</a></span>, scale<span class="op">=</span><span class="fl">1</span>,</span>
<span>        <span class="va">se.fit</span>, model<span class="op">=</span><span class="cn">FALSE</span>, x<span class="op">=</span><span class="cn">FALSE</span>, y<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>formula</dt>
<dd><p>formula object.  The response variable is a vector of follow-up times 
and is optional.  The predictors consist of optional grouping variables 
separated by the <code>+</code> operator (as in <code>survfit</code>), and is often
<code>~1</code>, i.e., expected survival for the entire group.</p></dd>

<dt>data</dt>
<dd><p>data frame in which to interpret the variables named in 
the <code>formula</code>, <code>subset</code> and <code>weights</code> arguments.</p></dd>

<dt>weights</dt>
<dd><p>case weights.  This is most useful when conditional survival for a known
  population is desired, e.g., the data set would contain all unique
  age/sex combinations and the weights would be the proportion of each.</p></dd>

<dt>subset</dt>
<dd><p>expression indicating a subset of the rows of <code>data</code> to be used in the fit.</p></dd>

<dt>na.action</dt>
<dd><p>function to filter missing data. This is applied to the model frame after  
<code>subset</code> has been applied.  Default is <code>options()$na.action</code>.</p></dd>

<dt>rmap</dt>
<dd><p>an optional list that maps data set names to the ratetable names.  See
 the details section below.</p></dd>

<dt>times</dt>
<dd><p>vector of follow-up times at which the resulting survival curve is  
evaluated.  If absent, the result will be reported for each unique  
value of the vector of times supplied in the response value of
the <code>formula</code>.</p></dd>

<dt>method</dt>
<dd><p>computational method for the creating the survival curves.
  The <code>individual</code> option does not create a curve, rather it
  retrieves the predicted survival <code>individual.s</code> or cumulative
  hazard <code>individual.h</code> for each subject.
  The default is to use <code>method='ederer'</code> if the formula has no
  response, and  <code>method='hakulinen'</code> otherwise.</p></dd>

<dt>cohort</dt>
<dd><p>logical value.  This argument has been superseded by the
  <code>method</code> argument.  To maintain backwards compatability,
  if is present and FALSE, it implies <code>method='individual.s'</code>.</p></dd>


<dt>conditional</dt>
<dd><p>logical value.  This argument has been superseded by the
  <code>method</code> argument.  To maintain backwards compatability,
  if it is present and TRUE it implies <code>method='conditional'</code>.</p></dd>


<dt>ratetable</dt>
<dd><p>a table of event rates,
  such as <code>survexp.mn</code>, or a fitted Cox model.
  Note the <code>survival::</code> prefix in the default argument is present
  to avoid the (rare) case of a user who expects the default table
  but just happens to have an object named "survexp.us" in their own
  directory.</p></dd>
 

<dt>scale</dt>
<dd><p>numeric value to scale the results.  If <code>ratetable</code> is in units/day, 
<code>scale = 365.25</code> causes the output to be reported in years.</p></dd>


<dt>se.fit</dt>
<dd><p>compute the standard error of the predicted survival.  
This argument is currently ignored.  Standard errors are not a defined
concept for population rate tables (they are treated as coming from a
complete census), and for Cox models the calculation is hard.  Despite
good intentions standard errors for this latter case have not been
coded and validated.</p></dd>

<dt>model,x,y</dt>
<dd><p>flags to control what is returned.  If any of these is true, then the
model frame, the model matrix, and/or the vector of response times will be
returned as components of the final result, with the same names as the
flag arguments.</p></dd>
</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>if <code>cohort=TRUE</code> an object of class <code>survexp</code>, 
otherwise a vector of per-subject expected survival values. 
The former contains the number of subjects at risk 
and the expected survival for the cohort at each requested time.
The cohort survival is the hypothetical survival for a cohort of
subjects enrolled from the population at large, but matching the data
set on the factors found in the rate table.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Individual expected survival is usually used in models or testing, to 
`correct' for the age and sex composition of a group of subjects. 
For instance, assume that birth date, entry date into the study, 
sex and actual survival time are all known for a group of subjects. 
The <code>survexp.us</code> population tables contain expected death rates 
based on calendar year, sex and age. 
Then</p><div class="sourceCode"><pre><code>
  haz &lt;- survexp(fu.time ~ 1, data=mydata, 
                      rmap = list(year=entry.dt, age=(birth.dt-entry.dt)),
                      method='individual.h')) 
</code></pre></div><p>gives for each subject the total hazard experienced up to their observed 
death time or last follow-up time (variable fu.time) 
This probability can be used as a rescaled time value in models:</p><div class="sourceCode"><pre><code><span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/glm.html" class="external-link">glm</a></span><span class="op">(</span><span class="va">status</span> <span class="op">~</span> <span class="fl">1</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/stats/offset.html" class="external-link">offset</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="va">haz</span><span class="op">)</span><span class="op">)</span>, family<span class="op">=</span><span class="va">poisson</span><span class="op">)</span> </span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/glm.html" class="external-link">glm</a></span><span class="op">(</span><span class="va">status</span> <span class="op">~</span> <span class="va">x</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/stats/offset.html" class="external-link">offset</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="va">haz</span><span class="op">)</span><span class="op">)</span>, family<span class="op">=</span><span class="va">poisson</span><span class="op">)</span> </span></code></pre></div><p>In the first model, a test for intercept=0 is the one sample log-rank 
test of whether the observed group of subjects has equivalent survival to 
the baseline population.  The second model tests for an effect of variable 
<code>x</code> after adjustment for age and sex.</p>
<p>The ratetable being used may have different variable names than the user's
data set, this is dealt with by the <code>rmap</code> argument.  
The rate table for the above calculation was <code>survexp.us</code>, a call to
<code>summary{survexp.us}</code> reveals that it expects to have variables 
<code>age</code> = age in days, <code>sex</code>, and <code>year</code> = the date of study
entry, we create them in the <code>rmap</code> line.  The sex variable was not
mapped, therefore the function assumes that it exists in <code>mydata</code> in the
correct format.  (Note: for factors such as sex, the program will match on
any unique abbreviation, ignoring case.)</p>
<p>Cohort survival is used to produce an overall survival curve.  This is then 
added to the Kaplan-Meier plot of the study group for visual comparison 
between these subjects and the population at large.  There are three common 
methods of computing cohort survival. 
In the "exact method" of Ederer the cohort is not censored, for this case 
no response variable is required in the formula.
Hakulinen recommends censoring 
the cohort at the anticipated censoring time of each patient, and Verheul 
recommends censoring the cohort at the actual observation time of each 
patient. 
The last of these is the conditional method. 
These are obtained by using the respective time values as the 
follow-up time or response in the formula.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Berry, G. (1983). The analysis of mortality by the subject-years method. 
<em>Biometrics</em>, 39:173-84.</p>
<p>Ederer, F., Axtell, L. and Cutler, S. (1961). 
The relative survival rate: a statistical methodology. 
<em>Natl Cancer Inst Monogr</em>, 6:101-21.</p>
<p>Hakulinen, T. (1982). 
Cancer survival corrected for heterogeneity in patient withdrawal. 
<em>Biometrics</em>, 38:933-942.</p>
<p>Therneau, T. and Grambsch, P. (2000).
Modeling survival data: Extending the Cox model.
Springer.  Chapter 10.</p>
<p>Verheul, H., Dekker, E., Bossuyt, P., Moulijn, A. and Dunning, A. (1993). 
Background mortality in clinical survival studies. 
<em>Lancet</em>, 341: 872-875.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="survfit.html">survfit</a></code>, <code><a href="pyears.html">pyears</a></code>,  <code><a href="survexp.us.html">survexp.us</a></code>,
  <code><a href="ratetable.html">ratetable</a></code>, <code><a href="survexp.fit.html">survexp.fit</a></code>.</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># </span></span></span>
<span class="r-in"><span><span class="co"># Stanford heart transplant data</span></span></span>
<span class="r-in"><span><span class="co">#  We don't have sex in the data set, but know it to be nearly all males.</span></span></span>
<span class="r-in"><span><span class="co"># Estimate of conditional survival  </span></span></span>
<span class="r-in"><span><span class="va">fit1</span> <span class="op">&lt;-</span> <span class="fu">survexp</span><span class="op">(</span><span class="va">futime</span> <span class="op">~</span> <span class="fl">1</span>, rmap<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>sex<span class="op">=</span><span class="st">"male"</span>, year<span class="op">=</span><span class="va">accept.dt</span>,   </span></span>
<span class="r-in"><span>          age<span class="op">=</span><span class="op">(</span><span class="va">accept.dt</span><span class="op">-</span><span class="va">birth.dt</span><span class="op">)</span><span class="op">)</span>, method<span class="op">=</span><span class="st">'conditional'</span>, data<span class="op">=</span><span class="va">jasa</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">fit1</span>, times<span class="op">=</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">*</span><span class="fl">182.5</span>, scale<span class="op">=</span><span class="fl">365</span><span class="op">)</span> <span class="co">#expected survival by 1/2 years</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Call: survexp(formula = futime ~ 1, data = jasa, rmap = list(sex = "male", </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     year = accept.dt, age = (accept.dt - birth.dt)), method = "conditional")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  time n.risk survival</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   0.5     41    0.996</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1.0     28    0.993</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1.5     21    0.989</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   2.0     16    0.986</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   2.5     13    0.983</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   3.0      8    0.980</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   3.5      7    0.977</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   4.0      3    0.972</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   4.5      1    0.969</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Estimate of expected  survival stratified by prior surgery </span></span></span>
<span class="r-in"><span><span class="fu">survexp</span><span class="op">(</span><span class="op">~</span> <span class="va">surgery</span>, rmap<span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>sex<span class="op">=</span><span class="st">"male"</span>, year<span class="op">=</span><span class="va">accept.dt</span>,  </span></span>
<span class="r-in"><span>  age<span class="op">=</span><span class="op">(</span><span class="va">accept.dt</span><span class="op">-</span><span class="va">birth.dt</span><span class="op">)</span><span class="op">)</span>, method<span class="op">=</span><span class="st">'ederer'</span>, data<span class="op">=</span><span class="va">jasa</span>,</span></span>
<span class="r-in"><span>        times<span class="op">=</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span> <span class="op">*</span> <span class="fl">182.5</span><span class="op">)</span> </span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Call:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> survexp(formula = ~surgery, data = jasa, rmap = list(sex = "male", </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     year = accept.dt, age = (accept.dt - birth.dt)), times = 1:10 * </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     182.5, method = "ederer")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   age ranges from 8.8 to 64.4 years</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   male: 103  female: 0 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   date of entry from 1967-09-13 to 1974-03-22 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  time nrisk1 nrisk2 surgery=0 surgery=1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   182     87     16     0.996     0.996</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   365     87     16     0.991     0.993</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   548     87     16     0.987     0.989</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   730     87     16     0.982     0.985</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   912     87     16     0.978     0.981</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1095     87     16     0.973     0.977</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1278     87     16     0.968     0.973</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1460     87     16     0.963     0.969</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1642     87     16     0.958     0.964</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1825     87     16     0.952     0.960</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Compare the survival curves for the Mayo PBC data to Cox model fit</span></span></span>
<span class="r-in"><span><span class="co">## </span></span></span>
<span class="r-in"><span><span class="va">pfit</span> <span class="op">&lt;-</span><span class="fu"><a href="coxph.html">coxph</a></span><span class="op">(</span><span class="fu"><a href="Surv.html">Surv</a></span><span class="op">(</span><span class="va">time</span>,<span class="va">status</span><span class="op">&gt;</span><span class="fl">0</span><span class="op">)</span> <span class="op">~</span> <span class="va">trt</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="va">bili</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="va">protime</span><span class="op">)</span> <span class="op">+</span> <span class="va">age</span> <span class="op">+</span></span></span>
<span class="r-in"><span>                <span class="va">platelet</span>, data<span class="op">=</span><span class="va">pbc</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="survfit.html">survfit</a></span><span class="op">(</span><span class="fu"><a href="Surv.html">Surv</a></span><span class="op">(</span><span class="va">time</span>, <span class="va">status</span><span class="op">&gt;</span><span class="fl">0</span><span class="op">)</span> <span class="op">~</span> <span class="va">trt</span>, data<span class="op">=</span><span class="va">pbc</span><span class="op">)</span>, mark.time<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/lines.html" class="external-link">lines</a></span><span class="op">(</span><span class="fu">survexp</span><span class="op">(</span> <span class="op">~</span> <span class="va">trt</span>, ratetable<span class="op">=</span><span class="va">pfit</span>, data<span class="op">=</span><span class="va">pbc</span><span class="op">)</span>, col<span class="op">=</span><span class="st">'purple'</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="survexp-1.png" alt="" width="700" height="433"></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Terry M Therneau.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

