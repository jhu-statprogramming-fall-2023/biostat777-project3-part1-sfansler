<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Compute population marginal means (PMM) from a model fit, for
  a chosen population and statistic."><title>Population prediction — yates • survival</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Population prediction — yates"><meta property="og:description" content="Compute population marginal means (PMM) from a model fit, for
  a chosen population and statistic."><meta property="og:image" content="/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">survival</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">3.5-6</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/example-analysis.html">Example Analysis</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/therneau/survival/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Population prediction</h1>
      
      <div class="d-none name"><code>yates.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Compute population marginal means (PMM) from a model fit, for
  a chosen population and statistic.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">yates</span><span class="op">(</span><span class="va">fit</span>, <span class="va">term</span>, population <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"factorial"</span>, <span class="st">"sas"</span><span class="op">)</span>,</span>
<span><span class="va">levels</span>, test <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"global"</span>, <span class="st">"trend"</span>, <span class="st">"pairwise"</span><span class="op">)</span>, predict <span class="op">=</span> <span class="st">"linear"</span>,</span>
<span><span class="va">options</span>, nsim <span class="op">=</span> <span class="fl">200</span>, method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"direct"</span>, <span class="st">"sgtt"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>fit</dt>
<dd><p>a model fit.  Examples using lm, glm, and coxph objects
    are given in the vignette.</p></dd>

<dt>term</dt>
<dd><p>the term from the model whic is to be evaluated.
  This can be written as a character string or as a formula.</p></dd>

  <dt>population</dt>
<dd><p>the population to be used for the adjusting
    variables.  User can supply their own data frame or select one
    of the built in choices.
    The argument also allows "empirical" and "yates" as aliases for
    data and factorial, respectively, and ignores case.</p></dd>

  <dt>levels</dt>
<dd><p>optional, what values for <code>term</code> should be used.</p></dd>

  <dt>test</dt>
<dd><p>the test for comparing the population predictions.</p></dd>

<dt>predict</dt>
<dd><p>what to predict.  For a glm model this might be the
  'link' or 'response'.  For a coxph model it can be linear, risk, or
  survival.  User written functions are allowed.</p></dd>

  <dt>options</dt>
<dd><p>optional arguments for the prediction method.</p></dd>

<dt>nsim</dt>
<dd><p>number of simulations used to compute a variance for the
  predictions.  This is not needed for the linear predictor.</p></dd>

<dt>method</dt>
<dd><p>the computational approach for testing equality of the
  population predictions.  Either the direct approach or the algorithm
  used by the SAS glim procedure for "type 3" tests.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The many options and details of this function are best described in a
  vignette on population prediction.</p>
    </div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>an object of class <code>yates</code> with components of</p>
<dl><dt>estimate</dt>
<dd><p>a data frame with one row for each level of the term,
    and columns containing the level, the mean population predicted
    value (mppv) and its standard deviation.</p></dd>

  <dt>tests</dt>
<dd><p>a matrix giving the test statistics</p></dd>

  <dt>mvar</dt>
<dd><p>the full variance-covariance matrix of the mppv values</p></dd>

  <dt>summary</dt>
<dd><p>optional: any further summary if the values provided by
    the prediction method.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Terry Therneau</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">fit1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">skips</span> <span class="op">~</span> <span class="va">Solder</span><span class="op">*</span><span class="va">Opening</span> <span class="op">+</span> <span class="va">Mask</span>, data <span class="op">=</span> <span class="va">solder</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">yates</span><span class="op">(</span><span class="va">fit1</span>, <span class="op">~</span><span class="va">Opening</span>, population <span class="op">=</span> <span class="st">"factorial"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Opening     pmm     std        test chisq df    ss      Pr</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        L  3.2638 0.33460      global 573.4  2 15980 &lt; 1e-08</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        M  3.5700 0.30480                                   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        S 12.3519 0.31251                                   </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">fit2</span> <span class="op">&lt;-</span> <span class="fu"><a href="coxph.html">coxph</a></span><span class="op">(</span><span class="fu"><a href="Surv.html">Surv</a></span><span class="op">(</span><span class="va">time</span>, <span class="va">status</span><span class="op">)</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">ph.ecog</span><span class="op">)</span><span class="op">*</span><span class="va">sex</span> <span class="op">+</span> <span class="va">age</span>, <span class="va">lung</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">yates</span><span class="op">(</span><span class="va">fit2</span>, <span class="op">~</span> <span class="va">ph.ecog</span>, predict<span class="op">=</span><span class="st">"risk"</span><span class="op">)</span>  <span class="co"># hazard ratio</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  factor(ph.ecog)     pmm     std                 test chisq df Pr</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                0 0.94238  0.4213      factor(ph.ecog)    NA NA NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                1 1.42677  0.7227                                 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                2 1.74848  3.3454                                 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                3      NA 17.4530                                 </span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Terry M Therneau.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

