<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="For multi-state survival models it is useful to have a figure that
  shows the states and the possible transitions between them.
  This function creates a simple &quot;box and arrows&quot; figure.  It's goal
  was simplicity."><title>Draw a state space figure. — statefig • survival</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Draw a state space figure. — statefig"><meta property="og:description" content="For multi-state survival models it is useful to have a figure that
  shows the states and the possible transitions between them.
  This function creates a simple &quot;box and arrows&quot; figure.  It's goal
  was simplicity."><meta property="og:image" content="/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">survival</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">3.5-6</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/example-analysis.html">Example Analysis</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/therneau/survival/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Draw a state space figure.</h1>
      
      <div class="d-none name"><code>statefig.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>For multi-state survival models it is useful to have a figure that
  shows the states and the possible transitions between them.
  This function creates a simple "box and arrows" figure.  It's goal
  was simplicity.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">statefig</span><span class="op">(</span><span class="va">layout</span>, <span class="va">connect</span>, margin <span class="op">=</span> <span class="fl">0.03</span>, box <span class="op">=</span> <span class="cn">TRUE</span>, cex <span class="op">=</span> <span class="fl">1</span>, col <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  lwd<span class="op">=</span><span class="fl">1</span>, lty<span class="op">=</span><span class="fl">1</span>, bcol<span class="op">=</span><span class="va">col</span>, acol<span class="op">=</span><span class="va">col</span>, alwd<span class="op">=</span><span class="va">lwd</span>, alty<span class="op">=</span><span class="va">lty</span>, offset<span class="op">=</span><span class="fl">0</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>layout</dt>
<dd><p>describes the layout of the boxes on the page.  See the
    detailed description below.</p></dd>

<dt>connect</dt>
<dd><p>a square matrix with one row for each state.
  If <code>connect[i,j] !=0</code> then an arrow is drawn from state i to
  state j.  The row names of the matrix are used as the labels for the
  states.</p></dd>

  <dt>margin</dt>
<dd><p>the fraction of white space between the label and the
    surrounding box, and between the box and the arrows, as a function
    of the plot region size.</p></dd>

  <dt>box</dt>
<dd><p>should boxes be drawn?  TRUE or FALSE.</p></dd>

<dt>cex, col, lty, lwd</dt>
<dd><p>default graphical parameters used for the
  text and boxes.  The last 3 can be a vector of values.</p></dd>

<dt>bcol</dt>
<dd><p>color for the box, if it differs from that used for the
  text.</p></dd>

<dt>acol, alwd, alty</dt>
<dd><p>color, line type and line width for the arrows.</p></dd>


<dt>offset</dt>
<dd><p>used to slight offset the arrows between two boxes x and y
  if there is a transition in both directions.  The default of 0
  leads to a double headed arrow in this case -- to arrows are drawn but
  they coincide.  A positive value causes each arrow to shift to the
  left, from the view of someone standing at the foot of a arrow and
  looking towards the arrowhead, a negative offset shifts to the right.
  A value of 1 corresponds to the size of the plotting region.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The arguments for color, line type and line width can all be vectors,
  in which case they are recycled as needed.  Boxes and text are drawn
  in the order of the rownames of <code>connect</code>, and arrows are drawn
  in the usual R matrix order.</p>  
<p>The <code>layout</code> argument is normally a vector of integers, e.g., the
  vector (1, 3, 2) describes a layout with 3 columns.  The first has a
  single state, the second column has 3 states and the third has 2.
  The coordinates of the plotting region are 0 to 1 for both x and y.
  Within a column the centers of the boxes are evenly spaced, with 1/2 a
  space between the boxes and the margin, e.g., 4 boxes would be at 1/8,
  3/8, 5/8 and 7/8.  If <code>layout</code> were a 1 column matrix with values
  of (1, 3, 2) then the layout will have three rows with 1, 3, and 2
  boxes per row, respectively.  Alternatively, the user can supply a
  2 column matrix that directly gives the centers.</p>
<p>The values of the connect matrix should be 0 for pairs of states that
  do not have a transition and values between 0 and 2 for those that do.
  States are connected by an arc that passes through the centers of the
  two boxes and a third point that is between them.  Specifically,
  consider a line segment joining the two centers and erect a second
  segment at right angles to the midpoint of length d times the distance
  from center to midpoint.  The arc passes through this point.  A value
  of d=0 gives a straight line, d=1 a right hand half circle centered
  on the midpoint and d= -1 a left hand half circle.  
  The <code>connect</code> matrix contains values of d+1 with -1 &lt; d &lt; 1.</p>
<p>The connecting arrow are drawn from (center of box 1 + offset) to
  (center of box 2 + offset), where the the amount of offset (white
  space) is determined by the <code>box</code> and <code>margin</code> parameters.
  If a pair of states are too close together this can result in an
  arrow that points the wrong way.</p>
    </div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>a matrix containing the centers of the boxes, with the invisible
  attribute set.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Terry Therneau</p>
    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>The goal of this function is to make ``good enough'' figures as simply
  as possible,
  and thereby to encourage users to draw them.
  The <code>layout</code> argument was inspired by the <code>diagram</code> package,
  which can draw more complex and well decorated figures, e.g., many
  different shapes, shading, 
  multiple types of connecting lines, etc., but at the
  price of greater complexity.</p>
<p>Because curved lines are drawn as a set of short line segments, line
  types have almost no effect for that case.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Draw a simple competing risks figure</span></span></span>
<span class="r-in"><span><span class="va">states</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Entry"</span>, <span class="st">"Complete response"</span>, <span class="st">"Relapse"</span>, <span class="st">"Death"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">connect</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">4</span>, <span class="fl">4</span>, dimnames<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">states</span>, <span class="va">states</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">connect</span><span class="op">[</span><span class="fl">1</span>, <span class="op">-</span><span class="fl">1</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1.1</span>, <span class="fl">1</span>, <span class="fl">0.9</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">statefig</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span><span class="op">)</span>, <span class="va">connect</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="statefig-1.png" alt="" width="700" height="433"></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Terry M Therneau.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

