<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Perform a set of consistency checks on survival data"><title>Checks of a survival data set — survcheck • survival</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Checks of a survival data set — survcheck"><meta property="og:description" content="Perform a set of consistency checks on survival data"><meta property="og:image" content="/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">survival</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">3.5-6</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/example-analysis.html">Example Analysis</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/therneau/survival/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Checks of a survival data set</h1>
      
      <div class="d-none name"><code>survcheck.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Perform a set of consistency checks on survival data</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">survcheck</span><span class="op">(</span><span class="va">formula</span>, <span class="va">data</span>, <span class="va">subset</span>, <span class="va">na.action</span>, <span class="va">id</span>, <span class="va">istate</span>, istate0<span class="op">=</span><span class="st">"(s0)"</span>, </span>
<span>timefix<span class="op">=</span><span class="cn">TRUE</span>,<span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>formula</dt>
<dd><p>a model formula with a <code>Surv</code> object as the
    response</p></dd>

  <dt>data</dt>
<dd><p>data frame in which to find the <code>id</code>,
    <code>istate</code> and formula variables</p></dd>

  <dt>subset</dt>
<dd><p>expression indicating which subset of the rows of data
    should be used in the fit.    All observations are included by default.</p></dd>

  <dt>na.action</dt>
<dd><p>a missing-data filter function.  This is applied to the model.frame
    after any 
    subset argument has been used.  Default is <code>options()\$na.action</code>.</p></dd>

  <dt>id</dt>
<dd><p>an identifier that labels unique subjects</p></dd>

  <dt>istate</dt>
<dd><p>an optional vector giving the current state at the start
    of each interval</p></dd>

  <dt>istate0</dt>
<dd><p>default label for the initial state of each subject (at
    their first interval) when <code>istate</code> is missing</p></dd>

  <dt>timefix</dt>
<dd><p>process times through the <code>aeqSurv</code> function to
  eliminate potential roundoff issues.</p></dd>

  <dt>...</dt>
<dd><p>other arguments, which are ignored (but won't give an
    error if someone added <code>weights</code> for instance)</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This routine will examine a multi-state data set for consistency of
  the data.  The basic rules are that if a subject is at risk they have
  to be somewhere, can not be two states at once, and should make
  sensible transitions from state to state.  It reports the number of
  instances of the following conditions:</p><dl><dt>overlap</dt>
<dd><p>two observations for the same subject that overlap in
      time, e.g. intervals of (0, 100) and (90, 120).  
      If <code>y</code> is simple (time, status) survival observation
      intervals implicitly start at 0, so in that case any duplicate
      identifiers will generate an overlap.</p></dd>

    <dt>jump</dt>
<dd><p>a hole in a subject's timeline, where they are in one
      state at the end of the prior interval, but a new state in the
      at the start subsequent interval.</p></dd>

   <dt>gap</dt>
<dd><p>one or more gaps in a subject's timeline; they are presumably
      in the same state at their return as when they left.</p></dd>

    <dt>teleport</dt>
<dd><p>two adjacent intervals for a subject, with the
      first interval ending in one state and the subsequent interval
      starting in another.  They have instantaneously changed states
      with experiencing a transition.</p></dd>

     
</dl><p>The total number of occurences of each is present in the <code>flags</code>
  vector. Optional components give the location and identifiers of the
  flagged observations.</p>
    </div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>a list with components</p>
<dl><dt>states</dt>
<dd><p>the vector of possible states</p></dd>

  <dt>transitions</dt>
<dd><p>a matrix giving the count of transitions from one
    state to another</p></dd>

  <dt>statecount</dt>
<dd><p>table of the number of visits per state, e.g., 18
    subjects had 2 visits to the "infection" state</p></dd>

  <dt>flags</dt>
<dd><p>a vector giving the counts of each check</p></dd>

  <dt>istate</dt>
<dd><p>a copy of the istate vector, if it was supplied;
    otherwise a constructed istate that satisfies all the checks</p></dd>

  <dt>overlap</dt>
<dd><p>a list with the row number and id of overlaps (not
    present if there are no overlaps)</p></dd>

  <dt>gaps</dt>
<dd><p>a list with the row number and id of gaps (not present if
    there are no gaps)</p></dd>

  <dt>teleport</dt>
<dd><p>a list with the row number and id of inconsistent
    rows (not present if there are none)</p></dd>

  <dt>jumps</dt>
<dd><p>a list with the row number and id of jumps (not present
    if there are no jumps</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>For data sets with time-dependent covariates, a given subject will often
have intermediate rows with a status of `no event at this time'.  (numeric
value of 0).
For instance a subject who started in state 1 at time 0, transitioned to state
2 at time 10, had a covariate <code>x</code> change from 135 to 156 at time
20, and a final transition to state 3 at time 30.
The response would be <code>Surv(c(0, 10, 20), c(10, 20, 30), c(2,0,3))</code>:
the status variable records <em>changes</em> in state, and there was no
change at time 20.
The <code>istate</code> variable would be (1, 2, 2); it contains the <em>current</em>
state, and so the value is unchanged when status = censored.</p>
<p>Thus, when there are intermediate observations <code>istate</code> is not
simply a lagged version of the status, and may be more challenging to
create.
One approach is to let <code>survcheck</code> do the work: call it with
an <code>istate</code> argument that is correct for the first row of each
subject, or no <code>istate</code> argument at all, and then insert the
returned value into ones data frame.</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Terry M Therneau.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

