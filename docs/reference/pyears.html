<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="This function computes the person-years of follow-up time contributed by a 
cohort of subjects, stratified into subgroups. 
It also computes the number of subjects who contribute to each cell of the 
output table, and optionally the number of events and/or expected number of 
events in each cell."><title>Person Years — pyears • survival</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Person Years — pyears"><meta property="og:description" content="This function computes the person-years of follow-up time contributed by a 
cohort of subjects, stratified into subgroups. 
It also computes the number of subjects who contribute to each cell of the 
output table, and optionally the number of events and/or expected number of 
events in each cell."><meta property="og:image" content="/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">survival</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">3.5-6</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/example-analysis.html">Example Analysis</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/therneau/survival/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Person Years</h1>
      
      <div class="d-none name"><code>pyears.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function computes the person-years of follow-up time contributed by a 
cohort of subjects, stratified into subgroups. 
It also computes the number of subjects who contribute to each cell of the 
output table, and optionally the number of events and/or expected number of 
events in each cell.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">pyears</span><span class="op">(</span><span class="va">formula</span>, <span class="va">data</span>, <span class="va">weights</span>, <span class="va">subset</span>, <span class="va">na.action</span>,  <span class="va">rmap</span>,</span>
<span>       <span class="va">ratetable</span>, scale<span class="op">=</span><span class="fl">365.25</span>, expect<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'event'</span>, <span class="st">'pyears'</span><span class="op">)</span>,</span>
<span>       model<span class="op">=</span><span class="cn">FALSE</span>, x<span class="op">=</span><span class="cn">FALSE</span>, y<span class="op">=</span><span class="cn">FALSE</span>, data.frame<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>formula</dt>
<dd><p>a formula object. 
    The response variable will be a vector of follow-up times 
    for each subject, or a <code>Surv</code> object containing the survival
    time and an event indicator. 
    The predictors consist of optional grouping variables 
    separated by + operators (exactly as in <code>survfit</code>),
    time-dependent grouping 
    variables such as age (specified with <code>tcut</code>), and optionally a 
    <code>ratetable</code> term. 
    This latter matches each subject to his/her expected cohort.</p></dd>

  <dt>data</dt>
<dd><p>a data frame in which to interpret the variables named in 
    the <code>formula</code>, or in the <code>subset</code> and the <code>weights</code>
    argument.</p></dd>

  <dt>weights</dt>
<dd><p>case weights.</p></dd>

  <dt>subset</dt>
<dd><p>expression saying that only a subset of the rows of the data 
    should be used in the fit.</p></dd>

  <dt>na.action</dt>
<dd><p>a missing-data filter function, applied to the model.frame, after any 
    <code>subset</code> argument has been used.
    Default is <code>options()$na.action</code>.</p></dd>

  <dt>rmap</dt>
<dd><p>an optional list that maps data set names to the ratetable names.  See
    the details section below.</p></dd>

  <dt>ratetable</dt>
<dd><p>a table of event rates, such as <code>survexp.uswhite</code>.</p></dd>

  <dt>scale</dt>
<dd><p>a scaling for the results.  As most rate tables are in units/day, the 
    default value of 365.25 causes the output to be reported in years.</p></dd>

  <dt>expect</dt>
<dd><p>should the output table include the expected number of events, or the
    expected number of person-years of observation.  This is only valid with
    a rate table.</p></dd>

  <dt>data.frame</dt>
<dd><p>return a data frame rather than a set of arrays.</p></dd>

  <dt>model, x, y</dt>
<dd><p>If any of these is true, then the
    model frame, the model matrix, and/or the vector of response times will be
    returned as components of the final result.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>a list with components:</p>
<dl><dt>pyears</dt>
<dd><p>an array containing the person-years of exposure. (Or other units, depending 
on the rate table and the scale).
The dimension and dimnames of the array correspond to the variables on
the right hand side of the model equation.</p></dd>

<dt>n</dt>
<dd><p>an array containing the number of subjects who contribute time to each cell 
of the <code>pyears</code> array.</p></dd>

<dt>event</dt>
<dd><p>an array containing the observed number of events.  This will be present only 
if the response variable is a <code>Surv</code> object.</p></dd>

<dt>expected</dt>
<dd><p>an array containing the expected number of events (or person years if 
<code>expect ="pyears"</code>).  This will be present only if there was a 
<code>ratetable</code> term.</p></dd>

<dt>data</dt>
<dd><p>if the <code>data.frame</code> option was set, a data frame containing the
variables <code>n</code>, <code>event</code>, <code>pyears</code> and <code>event</code> that
supplants the four arrays listed above,
along with variables corresponding to each dimension.
There will be one row for each cell in the arrays.</p></dd>

<dt>offtable</dt>
<dd><p>the number of person-years of exposure in the cohort that was not part of 
any cell in the <code>pyears</code> array.  This is often useful as an error check;
if 
there is a mismatch of units between two variables, nearly all the person 
years may be off table.</p></dd>

<dt>tcut</dt>
<dd><p>whether the call included any time-dependent cutpoints.</p></dd>

<dt>summary</dt>
<dd><p>a summary of the rate-table matching. This is also useful as an error 
check.</p></dd>

<dt>call</dt>
<dd><p>an image of the call to the function.</p></dd>

<dt>observations</dt>
<dd><p>the number of observations in the input data set,
after any missings were removed.</p></dd>


<dt>na.action</dt>
<dd><p>the <code>na.action</code> attribute contributed by an <code>na.action</code>
routine, if any.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Because <code>pyears</code> may have several time variables, it is necessary that all 
of them be in the same units.  For instance, in the call</p><div class="sourceCode"><pre><code><span></span>
<span>  <span class="va">py</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/pyears.html">pyears</a></span><span class="op">(</span><span class="va">futime</span> <span class="op">~</span> <span class="va">rx</span>, rmap<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>age<span class="op">=</span><span class="va">age</span>, sex<span class="op">=</span><span class="va">sex</span>, year<span class="op">=</span><span class="va">entry.dt</span><span class="op">)</span>,</span>
<span>                    ratetable<span class="op">=</span><span class="va">survexp.us</span><span class="op">)</span> </span></code></pre></div><p>the natural unit of the ratetable is hazard per day, it is important that
<code>futime</code>, 
<code>age</code> and <code>entry.dt</code> all be in days. 
Given the wide range of possible inputs, 
it is difficult for the routine to do sanity checks of this aspect.</p>
<p>The ratetable being used may have different variable names than the user's
data set, this is dealt with by the <code>rmap</code> argument.  
The rate table for the above calculation was <code>survexp.us</code>, a call to
<code>summary{survexp.us}</code> reveals that it expects to have variables 
<code>age</code> = age in days, <code>sex</code>, and <code>year</code> = the date of study
entry, we create them in the <code>rmap</code> line.  The sex variable is not
mapped, therefore the code assumes that it exists in <code>mydata</code> in the
correct format.  (Note: for factors such as sex, the program will match on
any unique abbreviation, ignoring case.)</p>
<p>A special function <code>tcut</code> is needed to specify time-dependent cutpoints. 
For instance, assume that age is in years, and that the desired final 
arrays have as one of their margins the age groups 0-2, 2-10, 10-25, and 25+. 
A subject who enters the study at age 4 and remains under observation for 
10 years will contribute follow-up time to both the 2-10 and 10-25 
subsets.  If <code>cut(age, c(0,2,10,25,100))</code> were used in the formula, the 
subject would be classified according to his starting age only. 
The <code>tcut</code> function has the same arguments as <code>cut</code>, 
but produces a different output object which allows the <code>pyears</code> function 
to correctly track the subject.</p>
<p>The results of <code>pyears</code> are normally used as input to further calculations. 
The <code>print</code> routine, therefore, is designed to give only a summary of the 
table.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="ratetable.html">ratetable</a></code>,  <code><a href="survexp.html">survexp</a></code>,  <code><a href="Surv.html">Surv</a></code>.</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Look at progression rates jointly by calendar date and age</span></span></span>
<span class="r-in"><span><span class="co"># </span></span></span>
<span class="r-in"><span><span class="va">temp.yr</span>  <span class="op">&lt;-</span> <span class="fu"><a href="tcut.html">tcut</a></span><span class="op">(</span><span class="va">mgus</span><span class="op">$</span><span class="va">dxyr</span>, <span class="fl">55</span><span class="op">:</span><span class="fl">92</span>, labels<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="fl">55</span><span class="op">:</span><span class="fl">91</span><span class="op">)</span><span class="op">)</span> </span></span>
<span class="r-in"><span><span class="va">temp.age</span> <span class="op">&lt;-</span> <span class="fu"><a href="tcut.html">tcut</a></span><span class="op">(</span><span class="va">mgus</span><span class="op">$</span><span class="va">age</span>, <span class="fl">34</span><span class="op">:</span><span class="fl">101</span>, labels<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="fl">34</span><span class="op">:</span><span class="fl">100</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">ptime</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">mgus</span><span class="op">$</span><span class="va">pctime</span><span class="op">)</span>, <span class="va">mgus</span><span class="op">$</span><span class="va">futime</span>, <span class="va">mgus</span><span class="op">$</span><span class="va">pctime</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">pstat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">mgus</span><span class="op">$</span><span class="va">pctime</span><span class="op">)</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">pfit</span> <span class="op">&lt;-</span> <span class="fu">pyears</span><span class="op">(</span><span class="fu"><a href="Surv.html">Surv</a></span><span class="op">(</span><span class="va">ptime</span><span class="op">/</span><span class="fl">365.25</span>, <span class="va">pstat</span><span class="op">)</span> <span class="op">~</span> <span class="va">temp.yr</span> <span class="op">+</span> <span class="va">temp.age</span> <span class="op">+</span> <span class="va">sex</span>,  <span class="va">mgus</span>,</span></span>
<span class="r-in"><span>     data.frame<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span> </span></span>
<span class="r-in"><span><span class="co"># Turn the factor back into numerics for regression</span></span></span>
<span class="r-in"><span><span class="va">tdata</span> <span class="op">&lt;-</span> <span class="va">pfit</span><span class="op">$</span><span class="va">data</span></span></span>
<span class="r-in"><span><span class="va">tdata</span><span class="op">$</span><span class="va">age</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">tdata</span><span class="op">$</span><span class="va">temp.age</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">tdata</span><span class="op">$</span><span class="va">year</span><span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">tdata</span><span class="op">$</span><span class="va">temp.yr</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">fit1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/glm.html" class="external-link">glm</a></span><span class="op">(</span><span class="va">event</span> <span class="op">~</span> <span class="va">year</span> <span class="op">+</span> <span class="va">age</span><span class="op">+</span> <span class="va">sex</span> <span class="op">+</span><span class="fu"><a href="https://rdrr.io/r/stats/offset.html" class="external-link">offset</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="va">pyears</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>             data<span class="op">=</span><span class="va">tdata</span>, family<span class="op">=</span><span class="va">poisson</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co"># fit a gam model </span></span></span>
<span class="r-in"><span><span class="va">gfit.m</span> <span class="op">&lt;-</span> <span class="fu">gam</span><span class="op">(</span><span class="va">y</span> <span class="op">~</span> <span class="fu">s</span><span class="op">(</span><span class="va">age</span><span class="op">)</span> <span class="op">+</span> <span class="fu">s</span><span class="op">(</span><span class="va">year</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/stats/offset.html" class="external-link">offset</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="va">time</span><span class="op">)</span><span class="op">)</span>,  </span></span>
<span class="r-in"><span>                        family <span class="op">=</span> <span class="va">poisson</span>, data <span class="op">=</span> <span class="va">tdata</span><span class="op">)</span> </span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example #2  Create the hearta data frame: </span></span></span>
<span class="r-in"><span><span class="va">hearta</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/by.html" class="external-link">by</a></span><span class="op">(</span><span class="va">heart</span>, <span class="va">heart</span><span class="op">$</span><span class="va">id</span>,  </span></span>
<span class="r-in"><span>             <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="va">x</span><span class="op">[</span><span class="va">x</span><span class="op">$</span><span class="va">stop</span> <span class="op">==</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">x</span><span class="op">$</span><span class="va">stop</span><span class="op">)</span>,<span class="op">]</span><span class="op">)</span> </span></span>
<span class="r-in"><span><span class="va">hearta</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span><span class="st">"rbind"</span>, <span class="va">hearta</span><span class="op">)</span> </span></span>
<span class="r-in"><span><span class="co"># Produce pyears table of death rates on the surgical arm</span></span></span>
<span class="r-in"><span><span class="co">#  The first is by age at randomization, the second by current age</span></span></span>
<span class="r-in"><span><span class="va">fit1</span> <span class="op">&lt;-</span> <span class="fu">pyears</span><span class="op">(</span><span class="fu"><a href="Surv.html">Surv</a></span><span class="op">(</span><span class="va">stop</span><span class="op">/</span><span class="fl">365.25</span>, <span class="va">event</span><span class="op">)</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/cut.html" class="external-link">cut</a></span><span class="op">(</span><span class="va">age</span> <span class="op">+</span> <span class="fl">48</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">50</span>,<span class="fl">60</span>,<span class="fl">70</span>,<span class="fl">100</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span></span>
<span class="r-in"><span>       <span class="va">surgery</span>, data <span class="op">=</span> <span class="va">hearta</span>, scale <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">fit2</span> <span class="op">&lt;-</span> <span class="fu">pyears</span><span class="op">(</span><span class="fu"><a href="Surv.html">Surv</a></span><span class="op">(</span><span class="va">stop</span><span class="op">/</span><span class="fl">365.25</span>, <span class="va">event</span><span class="op">)</span> <span class="op">~</span> <span class="fu"><a href="tcut.html">tcut</a></span><span class="op">(</span><span class="va">age</span> <span class="op">+</span> <span class="fl">48</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">50</span>,<span class="fl">60</span>,<span class="fl">70</span>,<span class="fl">100</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span></span>
<span class="r-in"><span>       <span class="va">surgery</span>, data <span class="op">=</span> <span class="va">hearta</span>, scale <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">fit1</span><span class="op">$</span><span class="va">event</span><span class="op">/</span><span class="va">fit1</span><span class="op">$</span><span class="va">pyears</span>  <span class="co">#death rates on the surgery and non-surg arm</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                     surgery</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> cut(age + 48, c(0, 50, 60, 70, 100))         0         1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                             (0,50]   0.7615378 0.3036881</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                             (50,60]  2.0068681 0.9979508</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                             (60,70]  5.1083916       NaN</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                             (70,100]       NaN       NaN</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">fit2</span><span class="op">$</span><span class="va">event</span><span class="op">/</span><span class="va">fit2</span><span class="op">$</span><span class="va">pyears</span>  <span class="co">#death rates on the surgery and non-surg arm</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                      surgery</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcut(age + 48, c(0, 50, 60, 70, 100))         0         1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                           0+ thru  50 0.8013285 0.2636994</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                          50+ thru  60 1.6119238 0.6564817</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                          60+ thru  70 3.9701087       NaN</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                          70+ thru 100       NaN       NaN</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Terry M Therneau.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

